import { useState, useEffect } from 'react';

export default (key, initialValue='') => {
	const [ value, setValue ] = useState(() => {
		return localStorage.getItem(key) || initialValue
	});

	useEffect(() => {
		localStorage.setItem(key, value);
	}, [ value, key ]);
	// Додаємо key в заложності, щоб реакт не писав помилок (а він пише ті помики,
	// бо всередині useEffect ми використовуємо це key), а також, це додавання
	// нам не змінить поведінку і useEffect не буде викликатись лишні додаткові
	// рази, оскільки key в нас ініціалізується один раз і більше не міняється

	return [value, setValue];
};
